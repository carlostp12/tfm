%document identification for conditional
\providecommand\jobname{va}

\newcommand{\vaadministracion}[0]{
	\section{Administración}
	Antes de poner en marcha el sistema es necesario inicializar el servicio, para ello habría que crear los certificados internos, también hay que editar las políticas ya que vienen configuradas unas políticas por defecto.
	Para que el componente CryptosecOpenKey VA pueda ofrecer su servicio de manera correcta es necesario realizar un proceso de inicialización. Una vez completado el proceso de instalación la VA proporcionará un servicio de validación de certificados a través del protocolo OCSP. Además, el administrador del sistema podrá configurar el comportamiento del sistema a través de la interfaz de administración Web que se detallará más adelante.

	\subsection{Asistente de instalación}

	\input{asistente_instalacion.tex}

	\subsection{Administración web}

	\input{administracion_web_01.tex}

	Así podremos acceder con diferentes permisos según los certificados que tengamos instalados. Los roles disponibles que encapsulan las operaciones habilitadas son:
	\begin{itemize}
		\item Auditor: Autorizado para ver los datos generados por la RA (certificados emitidos, CRLs emitidas, operadores) y las trazas de las operaciones realizadas (logs).
		\item Operador de certificados: Responsable de emisión, revocación, suspensión de certificados de entidad final en la RA.
		\item Administrador de Sistema: Están autorizados para instalar, mantener y configurar el Software de los equipos de la RA siempre y cuando no afecte a la seguridad del mismo.
		\item Administrador de Seguridad: Tiene la responsabilidad general para la administración del Software de los equipos de la RA siempre que afecten a la seguridad.
		\item Operador de sistema: Tiene la responsabilidad de monitorizar los equipos de la RA y realizar operaciones de mantenimientos.
	\end{itemize}

	\subsubsection{Administración web para el rol Administrador de Seguridad}

	Mediante el rol administrador de seguridad, se pueden configurar los parámetros que condicionan el funcionamiento de los elementos software específicos de la VA. Entre estas funciones se encuentran la gestión de políticas de certificación, configuración de certificado de VA, de restauración de claves, configuración de acceso al sistema operativo, copia de seguridad de datos, restauración de datos, consulta de certificados internos, la gestión de acceso de los roles, la gestión de certificados de MiniCA, operadores o servidor.

	\paragraph{Administración}

	Este menú proporciona distintas opciones relacionadas con la configuración de seguridad del componente VA. Las operaciones permitidas en el menú administración son:
	\begin{itemize}
		\item Políticas de certificación.
		\item Certificado de VA.
		\item Acceso S.O.
		\item Copia de seguridad de claves.
		\item Restauración.
	\end{itemize}

	Estas operaciones serán detalladas a continuación.

	\subparagraph{Políticas de certificación}

	\input{politicas_variables_crl_01.tex}

	\subparagraph{Certificado VA}

	Dentro de esta entrada del menú aparecerán las operaciones relativas a la configuración del certificado de la VA. El proceso requiere la generación de una solicitud de certificado PKCS10 que se utilizará para generar el certificado en la CA. Una vez obtenido el certificado correspondiente a la VA se deberá importar en la opción correspondiente. Además de configurar el certificado de la VA se deberá configurar la ruta de validación importando los certificados de la CA raíz y de la CA subordinada que se emplearon para generar el certificado de la VA.

	\begin{itemize}
		\item \textbf{Generación PKCS10}
	\end{itemize}

	El administrador de seguridad, genera un PKCS10 mediante el cual, se emitirá en la CA Subordinada, el certificado inicial de RA. Para ello, debe seleccionar la longitud de clave privada que debe coincidir con el tamaño de la clave configurado en la política y se presiona el botón Generar. Tenemos el fichero para descargar el PKCS10 (Fig. \ref{casub_3}).

	\begin{figure}[H]
		\centering
		\includegraphics[scale=.5]{./img/casub_3.png}
		\caption{Pantalla para generar PKCS10.}
		\label{casub_3}
	\end{figure}

	\begin{itemize}
		\item \textbf{Importar certificado}
	\end{itemize}

	En este apartado, debemos importar el certificado de RA inicial emitido a través de la CA Subordinada, para ello presionamos sobre Examinar, buscamos el certificado y una vez adjuntado presionamos el botón Importar (Fig. \ref{va_2}).

	\begin{figure}[H]
		\centering
		\includegraphics[scale=.5]{./img/va_2.png}
		\caption{Pantalla de importación de certificado.}
		\label{va_2}
	\end{figure}

	\begin{itemize}
		\item \textbf{Cadena de certificación}
	\end{itemize}

	Al seleccionar esta opción se accede a una pantalla que permitirá importar los certificados de la CA raíz y de la CA sub (Fig. \ref{va_3}). Estos certificados se emplearán para construir la cadena de certificación de la VA.

	\begin{figure}[H]
		\centering
		\includegraphics[scale=.5]{./img/va_3.png}
		\caption{Configuración de la cadena de certificación de la VA.}
		\label{va_3}
	\end{figure}

	\input{backup_certificados_operadores_01.tex}

	\input{admin_config_01.tex}

	\input{mantenimiento_bbdd_01.tex}

	\subparagraph{Configuración de CA}

	Al seleccionar la opción Configuración de CA el administrador de sistema podrá configurar distintos parámetros de acceso a la CA desde la pantalla que se muestra en Fig. \ref{va_4}.

	\begin{figure}[H]
		\centering
		\includegraphics[scale=.5]{./img/va_4.png}
		\caption{Configuración de acceso a CA.}
		\label{va_4}
	\end{figure}

	El primer campo permite indicar la CA de la que se desea ofrecer el servicio de validación de certificados. Para ello se introduce la URL de la CA y se pulsa el botón Enviar, tras lo cual se reiniciarán las conexiones HTTPS establecidas con la CA. Una vez indicada la URL de la CA será necesario establecer una relación de confianza con ésta. Para ello se importará el certificado de la CA así como el certificado de la autoridad emisora del certificado de la CA.

	Por último será necesario introducir las credenciales de acceso a la base de datos de la CA administrada para que la VA pueda verificar el estado de revocación de los certificados. Para ello se introducirá el texto generado en la CA a partir del cual la VA podrá obtener las credenciales de acceso. El texto se podrá obtener accediendo a la CA subordinada como Administrador de Sistema y seleccionando la opción Mantenimiento base de datos en el menú Configuración (Fig. \ref{va_5}). Pulsando en el botón Recuperación de credenciales de acceso se obtendrá el texto que se introducirá a continuación en la VA.

	\begin{figure}[H]
		\centering
		\includegraphics[scale=.5]{./img/va_5.png}
		\caption{Recuperación de credenciales de acceso a la base de datos de la CA subordinada.}
		\label{va_5}
	\end{figure}

	\input{auditor_01.tex}

	\input{operador_sistemas_01.tex}
}

\input{pki.tex}